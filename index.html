<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horaires des Bus</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }
        table {
            width: 60%;
            margin: auto;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #007bff;
            padding: 10px;
        }
        th {
            background-color: #007bff;
            color: white;
        }
    </style>
</head>
<body>
    <h1>Prochains passages des Bus</h1>
    
    <table>
        <thead>
            <tr>
                <th>Ligne</th>
                <th>Prochains passages</th>
            </tr>
        </thead>
        <tbody id="horaires">
            <tr><td colspan="2">Chargement des horaires...</td></tr>
        </tbody>
    </table>
    
    <script>
        function getNextPassages() {
            const horairesDiv = document.getElementById("horaires");
            const now = new Date();
            const currentHour = now.getHours();
            const currentMinutes = now.getMinutes();
            const isWeekend = now.getDay() === 0 || now.getDay() === 6; // Vérifie si c'est le week-end

            const horairesBus = {
                "Ligne 1": isWeekend ? ["09:30", "11:00", "13:30", "15:45", "18:00"] : ["08:00", "09:15", "10:30", "12:00", "14:45", "16:20", "18:00", "19:30", "21:00"],
                "Ligne 2": isWeekend ? ["10:00", "12:30", "14:00", "16:30", "19:00"] : ["07:45", "09:00", "11:15", "13:00", "15:30", "17:45", "20:15"],
                "Ligne 3": isWeekend ? ["08:45", "10:15", "12:45", "15:00", "17:30"] : ["06:30", "08:15", "10:00", "12:30", "14:15", "16:45", "19:00", "21:30"]
            };
            
            let tableContent = "";
            for (const [ligne, horaires] of Object.entries(horairesBus)) {
                const nextPassages = horaires.filter(time => {
                    const [hour, minutes] = time.split(":").map(Number);
                    return hour > currentHour || (hour === currentHour && minutes > currentMinutes);
                }).slice(0, 2); // Prendre les 2 prochains horaires
                
                tableContent += `<tr><td>${ligne}</td><td>${nextPassages.length > 0 ? nextPassages.join(" | ") : "Plus de bus pour aujourd'hui"}</td></tr>`;
            }
            
            horairesDiv.innerHTML = tableContent;
        }
        
        // Mettre à jour les horaires toutes les minutes
        getNextPassages();
        setInterval(getNextPassages, 60000);
    </script>
</body>
</html>
