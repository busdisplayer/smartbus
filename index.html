<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horaires des Bus</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
            background-color: black;
            color: #00ff00;
        }
        .led-screen {
            width: 80%;
            margin: auto;
            padding: 20px;
            border: 3px solid #00ff00;
            font-size: 1.5em;
            background-color: black;
            color: #00ff00;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 150px;
        }
        table {
            width: 60%;
            margin: auto;
            border-collapse: collapse;
            background-color: black;
            color: #00ff00;
        }
        th, td {
            border: 1px solid #00ff00;
            padding: 10px;
        }
        th {
            background-color: #00ff00;
            color: black;
        }
    </style>
</head>
<body>
    <div class="led-screen" id="led-screen">Chargement...</div>
    
    <table>
        <thead>
            <tr>
                <th>Ligne</th>
                <th>Destination</th>
                <th>Prochains passages</th>
            </tr>
        </thead>
        <tbody id="horaires">
            <tr><td colspan="3">Chargement des horaires...</td></tr>
        </tbody>
    </table>
    
    <script>
        function updateLedScreen() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('fr-FR');
            const timeStr = now.toLocaleTimeString('fr-FR');
            document.getElementById("led-screen").innerHTML = `ðŸš ArrÃªt: Centre Ville | ${dateStr} - ${timeStr}`;
        }

        function getNextPassages() {
            const horairesDiv = document.getElementById("horaires");
            const now = new Date();
            const currentHour = now.getHours();
            const currentMinutes = now.getMinutes();
            const isWeekend = now.getDay() === 0 || now.getDay() === 6;

            const horairesBus = {
                "L30": { destination: "Gare Centrale", horaires: isWeekend ? ["09:30", "11:00", "13:30", "15:45", "18:00"] : ["08:00", "09:15", "10:30", "12:00", "14:45", "16:20", "18:00", "19:30", "21:00"] },
                "L31": { destination: "UniversitÃ©", horaires: isWeekend ? ["10:00", "12:30", "14:00", "16:30", "19:00"] : ["07:45", "09:00", "11:15", "13:00", "15:30", "17:45", "20:15"] },
                "L32": { destination: "HÃ´pital", horaires: isWeekend ? ["08:45", "10:15", "12:45", "15:00", "17:30"] : ["06:30", "08:15", "10:00", "12:30", "14:15", "16:45", "19:00", "21:30"] },
                "L11": { destination: "Stade", horaires: isWeekend ? ["09:15", "11:45", "14:15", "16:45", "19:30"] : ["07:00", "08:45", "10:30", "12:15", "14:00", "16:30", "18:45", "20:45"] },
                "L35": { destination: "AÃ©roport", horaires: isWeekend ? ["08:30", "10:30", "13:00", "15:30", "18:15"] : ["06:45", "08:30", "10:45", "12:45", "15:00", "17:15", "19:45", "22:00"] }
            };
            
            let tableContent = "";
            for (const [ligne, data] of Object.entries(horairesBus)) {
                const nextPassages = data.horaires.filter(time => {
                    const [hour, minutes] = time.split(":").map(Number);
                    return hour > currentHour || (hour === currentHour && minutes > currentMinutes);
                }).slice(0, 2);
                
                tableContent += `<tr><td>${ligne}</td><td>${data.destination}</td><td>${nextPassages.length > 0 ? nextPassages.join(" | ") : "Plus de bus pour aujourd'hui"}</td></tr>`;
            }
            
            horairesDiv.innerHTML = tableContent;
        }
        
        updateLedScreen();
        getNextPassages();
        setInterval(updateLedScreen, 1000);
        setInterval(getNextPassages, 60000);
    </script>
</body>
</html>

